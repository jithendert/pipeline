node {
	def commitId
	final boolean IS_MAIN_BRANCH = (env.BRANCH_NAME as String).equals("master")
	println("print the branch: " + IS_MAIN_BRANCH)
	
	stage('git pull') {
		checkout scm
	}
	stage('git read commit') {
		sh 'git rev-parse HEAD > commitid'
		commitId = readFile('commitid')
		println("commitid: " + commitId)
		
	}
	if(IS_MAIN_BRANCH) {
		stage('checking the branch') {
			println("checked out from the branch: " + env.BRANCH_NAME)
		}
	}
	else{
		println("check out failed")
	}
	
}
